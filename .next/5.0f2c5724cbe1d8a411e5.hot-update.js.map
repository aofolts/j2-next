{"version":3,"file":"5.0f2c5724cbe1d8a411e5.hot-update.js","sources":["webpack:///parts/Wrapper.js"],"sourcesContent":["import React, {Component} from 'react'\nimport fetch from 'isomorphic-unfetch'\nimport {config} from '../config'\n\n\nconst Wrapper = Child => (\n  class extends Component {\n\n    static async getInitialProps(context) {\n      const {slug,apiRoute} = context.query\n\n      // Site Data\n      const siteRes  = await fetch(config.api.restUrl),\n            site     = await siteRes.json()\n\n      console.log(`${config.api.restUrl}/js/v1/menu/2`)\n\n      // Menu Data\n      const menuRes = await fetch(`${config.api.restUrl}/j2/v1/menu/2`),\n            menu    = await menuRes.json()\n\n      // Post Url\n      let postUrl = `${config.api.wpRestUrl}/${apiRoute}/`\n      if (slug) {postUrl += `?slug=${slug}`}\n\n      // Post Data\n      const postRes = await fetch(postUrl),\n            post    = await postRes.json().then(r => {\n              return Array.isArray(r) ? r[0] : r\n            })\n\n      if (!post) {\n        const err = new Error()\n        err.code = 'ENOENT'\n        throw err\n      }\n\n      return Child.getInitialProps({\n        post: post,\n        menu: menu,\n        context: context.apiRoute,\n        query: context.query\n      })\n    }\n\n    render() {\n      return (\n        <Child {...this.props} />\n      )\n    }\n  }\n)\n\nexport default Wrapper\n\n\n// WEBPACK FOOTER //\n// parts/Wrapper.js"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAyCA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AA5CA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAOA;AAPA;AAAA;AACA;AADA;AAQA;AAEA;AACA;AAXA;AAAA;AACA;AADA;AAaA;AAbA;AAAA;AACA;AADA;AAcA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AApBA;AAAA;AACA;AADA;AAqBA;AArBA;AAAA;AAuBA;AACA;AACA;AAzBA;AAsBA;AACA;AAvBA;AAAA;AAAA;AAAA;AACA;AA0BA;AACA;AA5BA;AACA;AADA;AAAA;AAiCA;AACA;AACA;AACA;AAJA;AACA;AAjCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AA+CA;;;;A","sourceRoot":""}