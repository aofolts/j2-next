{"version":3,"file":"5.f92a8f37995d474e1936.hot-update.js","sources":["webpack:///pages/index.js","webpack:///parts/Header.js"],"sourcesContent":["import Header from '../parts/Header';\nimport fetch from 'isomorphic-unfetch'\nimport Wrap from '../parts/Wrap'\nimport WpImage from '../parts/WpImage'\nimport Button from '../parts/Button'\nimport Section from '../parts/Section'\nimport Slider from '../parts/Slider'\nimport { config } from '../config';\nimport FeaturedTabs from '../parts/FeaturedTabs'\nimport Video from '../parts/Video'\nimport Link from 'next/link'\nimport Layout from '../parts/Layout'\nimport BlogCard from '../parts/BlogCard'\n\nimport '../src/less/home.less'\nimport Wrapper from '../parts/Wrapper';\n\nconst IntroSection = props => (\n  <section id='section-intro'>\n    <Wrap width='small'>\n      <h2>{props.fields.headline}</h2>\n      <div className='copy' dangerouslySetInnerHTML={{__html: props.fields.copy}}></div>\n    </Wrap>\n  </section>\n)\n\nconst VideoSection = props => (\n  <Section name='video'>\n    <Wrap width='medium'>\n      <Video videoKey='44662050' host='vimeo' />\n    </Wrap>\n  </Section>\n)\n\nconst MenusSection = props => {\n  const fields = props.fields\n\n  return (\n    <Section name='menus'>\n      <div className='content'>\n        <Wrap width='small'>\n          <h2>{fields.headline}</h2>\n          <div className='copy' dangerouslySetInnerHTML={{__html: fields.copy}}></div>\n        </Wrap>\n      </div>\n      <Wrap width='main'>\n        <div className='grid-menus'>\n          {fields.list.map(post => (\n            <Link href={`/${post.slug}`} key={post.id}>\n              <a className='card'>\n                <WpImage className='background' data={post.featured_image} size='medium' />\n                <h3 className='title'>{post.title.rendered}</h3>\n              </a>\n            </Link>\n          ))}\n        </div>\n      </Wrap>\n    </Section>\n  )\n}\n\nconst CommunitySection = props => {\n  const fields = props.fields\n  console.log(fields)\n\n  return (\n    <Section name='community'>\n      <Wrap width='small'>\n        <h2>{fields.headline}</h2>\n        <div className='copy' dangerouslySetInnerHTML={{__html: fields.copy}}></div>\n      </Wrap>\n      <Wrap>\n        <div className='grid-community'>\n          {fields.list.map(post => (\n              <BlogCard key={post.id} post={post}/>\n          ))}\n        </div>\n      </Wrap>\n    </Section>\n  )\n}\n\nclass Index extends React.Component {\n\n  static async getInitialProps(props) {\n    const post = props.post\n\n    // Hero Slides\n    const slides = await Promise.all(\n      post.acf.hero_slides.map(async postId => {\n      const res = await fetch(`${config.api.wpRestUrl}/slides/` + postId + '?_embed')\n      return res.json()\n    }))\n\n    // Location Info\n    const locationRes = await fetch(`${config.api.restUrl}/acf/v3/options/location`),\n          location    = await locationRes.json(),\n          hours       = await location.acf.hours\n    \n    const featuredMenus = {\n      headline: post.acf.menus.headline,\n      copy: post.acf.menus.copy\n    }\n\n    featuredMenus.list = await Promise.all(\n      post.acf.menus.list.map(async postId => {\n      const res = await fetch(`${config.api.wpRestUrl}/pages/` + postId + '?_embed')\n      return res.json()\n    }))\n\n    // Recent Blog Posts\n    const blogsRes = await fetch(`${config.api.wpRestUrl}/blog/?per_page=3`),\n          blogs    = await {\n            headline: post.acf.community.headline,\n            copy: post.acf.community.copy,\n            list: await blogsRes.json()\n          }\n    \n    return {\n      ...props,\n      slides: slides,\n      hours: hours,\n      introFields: post.acf.intro,\n      location: location.acf,\n      featuredMenus: featuredMenus,\n      blog: blogs\n    }\n  }\n\n  render() {\n    console.log(this.props)\n    return (\n      <div id='page'>\n        <Layout {...this.props}>\n          <Slider slides={this.props.slides} />\n          <IntroSection fields={this.props.introFields} />\n          <Section name='featured_tabs'>\n            <Wrap>\n              <FeaturedTabs hours={this.props.hours} location={this.props.location} />\n            </Wrap>\n          </Section>\n          <VideoSection/>    \n          <MenusSection fields={this.props.featuredMenus} />   \n          <CommunitySection fields={this.props.blog} />\n        </Layout>\n      </div>\n    )\n  }\n\n}\n\nexport default Wrapper(Index)\n\n\n// WEBPACK FOOTER //\n// pages/index.js","import '../src/less/header.less'\nimport HeaderScript from './HeaderScript'\nimport MainMenu from './MainMenu'\nimport Link from 'next/link'\nimport {HeaderContext} from '../parts/HeaderContext'\nimport MobileMenu from '../parts/MobileMenu'\n\n/**\n * HEADER\n */\nexport default class Header extends React.Component {\n\n  constructor(props) {\n    super(props)\n  \n    const boundMethods = [\n      'checkIsMobile',\n      'closeMobileMenu',\n      'getHeaderClass',\n      'getMobileMenu',\n      'openMobileMenu',\n      'setActiveSubMenuById',\n      'watchWindow'\n    ]\n      \n    boundMethods.forEach(method => this[method] = this[method].bind(this))\n\n    this.state = {\n      activeSubMenuId: false,\n      isMobile: false,\n      mobileMenuIsOpen: false,\n      closeMobileMenu: this.closeMobileMenu,\n      openMobileMenu: this.openMobileMenu,\n      setActiveSubMenuById: this.setActiveSubMenuById\n    }\n  }\n\n  checkIsMobile() {\n    const width    = window.outerWidth,\n          isMobile = (width < 1280) || false\n\n    if (isMobile !== this.state.isMobile) {\n      this.setState({\n        isMobile: isMobile\n      })\n    }\n  }\n\n  componentDidMount() {\n    this.checkIsMobile()\n    this.watchWindow()\n\n    require('./HeaderScript')\n    const Script = new HeaderScript()\n  }\n\n  closeMobileMenu() {\n    this.setState({\n      activeSubMenuId: false,\n      mobileMenuIsOpen: false\n    })\n  }\n\n  getHeaderClass() {\n    if (this.state.isMobile) {\n      return 'is-mobile'\n    } else {\n      return 'not-mobile'\n    }\n  }\n\n  getMobileMenu() {\n    if (this.state.isMobile) {\n      const openClass = this.state.mobileMenuIsOpen ? 'is-open' : 'is-closed'\n\n      return (\n        <HeaderContext.Provider value={this.state}>\n          <MobileMenu openClass={openClass} menu={this.props.menu} closeMobileMenu={() => this.closeMobileMenu()}/>\n          <div className='toggle' onClick={this.openMobileMenu}>\n            <div className='bar bar-top'></div>\n            <div className='bar bar-middle'></div>\n            <div className='bar bar-bottom'></div>\n          </div>\n        </HeaderContext.Provider>\n      )\n    } else {\n      return (\n        <HeaderContext.Provider value={this.state}>\n           <MainMenu items={this.props.menu} />\n        </HeaderContext.Provider>\n      )\n    }\n  }\n\n  openMobileMenu() {\n    this.setState({\n      mobileMenuIsOpen: true\n    })\n  }\n  \n  setActiveSubMenuById(id) {\n    this.setState({\n      activeSubMenuId: id\n    })\n  }\n\n  watchWindow() {\n    window.addEventListener('resize',e => {\n      this.checkIsMobile()\n    })\n  }\n\n  render() {\n    return (\n      <header id='header' className={this.getHeaderClass()}>\n        <nav id='nav'>\n          <Link href={{pathname:'/', query: {slug:'home',apiRoute:'pages'} }} as={`/`}>\n            <a id='site_name'>\n              <img id='siteLogo' src='/static/img/logo-inline.svg'/>\n            </a>\n          </Link>\n          {this.getMobileMenu()}\n        </nav>\n      </header>\n    )\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// parts/Header.js"],"mappings":"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","sourceRoot":""}