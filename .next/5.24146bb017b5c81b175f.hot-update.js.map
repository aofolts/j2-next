{"version":3,"file":"5.24146bb017b5c81b175f.hot-update.js","sources":["webpack:///parts/Wrapper.js"],"sourcesContent":["import React, {Component} from 'react'\nimport fetch from 'isomorphic-unfetch'\nimport {config} from '../config'\n\n\nconst Wrapper = Child => (\n  class extends Component {\n\n    static async getInitialProps(context) {\n      const {slug,apiRoute} = context.query\n\n      // Site Data\n      const siteRes  = await fetch(config.api.restUrl),\n            site     = await siteRes.json()\n\n      // Menu Data\n      const menuRes = await fetch(`${config.api.restUrl}/j2/v1/menu/2`),\n            menu    = await menuRes.json()\n\n      // Post Url\n      let postUrl = `${config.api.wpRestUrl}/${apiRoute}/`\n      if (slug) {postUrl += `?slug=${slug}`}\n\n      // Post Data\n      const postRes = await fetch(postUrl),\n            post    = await postRes.json().then(r => {\n              return Array.isArray(r) ? r[0] : r\n            })\n\n      if (!post) {\n        const err = new Error()\n        err.code = 'ENOENT'\n        throw err\n      }\n\n      return Child.getInitialProps({\n        post: post,\n        menu: menu,\n        context: context.apiRoute,\n        query: context.query\n      })\n    }\n\n    render() {\n      return (\n        <Child {...this.props} />\n      )\n    }\n  }\n)\n\nexport default Wrapper\n\n\n// WEBPACK FOOTER //\n// parts/Wrapper.js"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAuCA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AA1CA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAOA;AAPA;AAAA;AACA;AADA;AAQA;AARA;AAAA;AACA;AADA;AAWA;AAXA;AAAA;AACA;AADA;AAYA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAlBA;AAAA;AACA;AADA;AAmBA;AAnBA;AAAA;AAqBA;AACA;AACA;AAvBA;AAoBA;AACA;AArBA;AAAA;AAAA;AAAA;AACA;AAwBA;AACA;AA1BA;AACA;AADA;AAAA;AA+BA;AACA;AACA;AACA;AAJA;AACA;AA/BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AA6CA;;;;A","sourceRoot":""}